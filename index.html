<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="/css/golf.css" />
    <script src="/node_modules/@babylonjs/havok/lib/umd/HavokPhysics_umd.js"></script>
    <script src="/node_modules/babylonjs/babylon.js"></script>
    <script src="/golf.js"></script>
    <title>PHYSLE Golf</title>
  </head>
  <body>
    <div id="scoreCard">Stroke 0</div>
    <div id="canvasWrapper"><canvas id="canvas"></canvas></div>
    <a href="javascript:void(0);" id="shotButton"></a>
    <script>
      var shotButton = document.getElementById('shotButton');
      var scoreCard = document.getElementById('scoreCard');
      var golf = new Game();
      
      golf.init().then(() => {
        //console.log(golf);
        golf.addBall(0,2,100);
        golf.addGround(0,0,100,"0011");
        golf.addCorner(0,0,160,0);
        golf.addCorner(60,0,100,Math.PI);
        golf.addBarrier(30,0,130,"circle",20);
        var m = golf.addGround(60,0,160,"1100");
        golf.addHole(m);
        golf.run();
      });

      golf.addEventListener("stop", function() {
        shotButton.style.borderStyle = 'solid'
      });

      golf.addEventListener("hole", function() {
        scoreCard.innerHTML = 'Hole in ' + golf.strokes;
      });

      // handle resize
      window.addEventListener("resize", function () {
        golf.engine.resize();
      });

      shotButton.addEventListener("mousedown", function() {

        golf.swing();

      });

      shotButton.addEventListener("mouseup", function() {
        golf.strike();
        shotButton.style.borderStyle = 'dashed'
        scoreCard.innerHTML = 'Stroke ' + golf.strokes;
      });
    
    </script>
  </body>
</html>
